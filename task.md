Давай назовем проект RDance и уберем все что касается частиц.
Будем делать симулятор танца: на экране будет нарисован человек, а с помощью клавиатуры мы будем управлять его движениями.
На расстоянии 10% от низа экрана пусть будет нарисована белая полоса - это будет пол. На нем будет стоять "человек". Сейчас мы нарисуем его в виде каркаса - скелета. Скелет будет представлять собой опорные точки (оторбазить окружностью небольшого радиуса) к которым будут крепиться кости (отобразить линиями небольшой толщины).
Опорными точками будут: ступни, колени, таз, основание шеи, левое плечо, правое плечо, левый локоть, правый локоть, левая кисть, правая кисть, голова.
Кости: от ступни к колену (левая и правая), от колена к тазу (левая и правая), от таза к основании шеи, от шеи до плеча (левого и правого), от плеча до локтя (левого и правого), от локтя до кисти (левой и правой), от основании шеи до головы.
Никакой физики к положению костей применять не надо. Подбери длины костей так, чтобы человек был пропорциональным. 
Сделай сохранение состояния скелета человека как координаты его таза, угола наклона туловища (кости от таза к основании шеи) и угла наклона остальных костей относительно кости туловища.
Сделай функцию отрисовки челвовека (сейчас - только скелета) по его состоянию.
Задай начальное состояние человека, чтобы он выглядел как человек, который стоит прямо и ступни его находятся на линии пола. 



Давай доработаем начальную позицию человека. Наш экран - как камера - смотрит на человека спереди. У человека спереди голова сверху, плечи от основания шеи по горизонтали, руки вниз и слегка в стороны, туловище вертикально, ноги вниз и слегка в стороны. Для начала подбери взаимное расположение углов так, чтобы положения конечностей соответствовало описанию выше. Потом подбери координаты таза так, чтобы координаты опорных точек ступней совпадали с линией пола. Координату по высоте линии пола можно зафиксировать константой или вычислять при первой отрисовке.


Исправь ошибку в расчете координат суставов: в функции calculateJointPositions используются тригонометрические функции, они принимают углы в радианах, а в состоянии углы указаны в градусах. Состояние пусть останется в градусах, а при расчетах пересчитывай градусы в радианы.

При повороте туловища все остальные кости тоже должны менять свою и позицию и угол, т.к. их положения заданы относительно координат таза и угла наклона туловища. Это справедливо для верхней части скелета - голова и руки перемещаются вместе с туловищем, но ноги остаются на месте, а это - ошибка. Исправь.

исправь началоное положение ног: сейчас углы заданы так, что на экране ноги рисуются вверх от таза, а ноги должны идти вниз



Добавить больше деталей (украшения, туфли, макияж)
Улучшить текстуры и градиенты
Добавить анимацию волос и ткани платья
Создать более сложные изображения программно


Визуализация получилась очень плохая. Давай откажемся от фотореалистичности, но оставим код для этого в проекте. Пусть будет несколько вариантов отрисовки, а фотореалистичность - один из них. Переключать будем константой в коде.
Давай нашего танцора - девушку рисовать. Для этого нам нужно что-то взять за образец, определить толщину каждой части тела, определить из каких частей состоит одежда и нарисовать в пропорциях.
Ты можешь проанализировать фото изображение и выделить из него контуры тела?

====
Добавь режим отладки, который включается и выключается по клавише 'w'. При включенном режиме в левом верхнем углу экрана выводятся все поля state с округлением до целого.

Переделай кнопки управления приложением
q - сброс до начального состояния
w - включение режима отладки
c - правая голень наружу
v - правая голень внутрь
n - левая колень внутрь
m - левая голень наружу
d - правое бедро наружу
f - правое бедро внутрь
j - левое бедро внутрь
k - левое бедро наружу
g - туловище наклон вправо
h - туловище наклон влево
t - голова вправо
y - голова влево
e - правое плечо вниз
r - правое плечо вверх
u - левое плечо вверх
i - левое плечо вниз

====

- поворот туловища относительно ног
- бит детектор
- прыжок
- ступни

====

Сделай редактирование и сохранение Движений. Движение это относительное изменение состояния скелета. Движение описывается той же структурой, что и состояние скелета, однако интерпретируется не как абсолютное значение, а как изменение - дельта. Движения привязываются к клавишам 1,2,3 и так далее до 9. При нажатии одной из этих клавиш мы входим в режим редактирования движения за номером, который соответствует цифре. На экране отображается сверху надпись "Редактирование движения `номер`". В этот момент мы делаем копию состояния скелета, которую считаем базовым состоянием. Пользователь может управлять скелетом как обычно. Как только пользователь повторно нажал туже клавишу с цифрой, мы сохраняем изменения в состоянии скелета между его текущим состоянием и базовым состоянием как движение за определенным номером и выходим из режима редактирования движения. 

Сделай режим Танец. Режим Танец включается и выключается по клавише пробел. Преключение отображается надписью на экране, которая появляется на полторы секунды: при включении "Режим танца", при выключении "Режим обучения". В режиме Танец клавиши 1-9 вместо редактирования движения запускают его выполнение. Все движения в итоге применяются к одному и тому же состоянию. Нам нужно, чтобы движения работали независимо. Для этого, в режиме Танец нужно высчитывать состояние как начальное плюс корректировки от каждого незавершенного движения. Каждое незавершенное движение хранится в массиве и фиксирует ту дельту, что дожна применяться к базовому состоянию. Эта дельта со временем меняется и становится нулевой, когда движение завершается и из массива незавершенных движений его нужно убрать. Выполнение движения означает, что нужно плавно изменить состояние корректировки на величины указанные в движении и также плавно изменить состояние корректировки в обратную сторону. Изменение должно быть выполнено за 2/5 длительности бита, в течение 1/5 длительности бита сохраняться и за 2/5 длительности бита вернуться в исходное состояние. 


Добавь возможность в режиме обучения перемещать суставы мышкой, что означает - регулировать относительный угол ребра из состояния относительно сустава, который граничит с перемещаемым и ближе или принадлежит туловищу. Такая возможность должна появиться у всех суставов, за исключением таза. При наведении мышкой на сустав который можно перетаскивать, вокруг него рисуется желтая окружность. 